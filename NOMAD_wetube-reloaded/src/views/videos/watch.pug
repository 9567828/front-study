extends ../base

block content
  div#video-container(data-id=video._id)
    video(src=`/${video.fileUrl}`)
    div#video-controls
      button#play Play
      button#mute Mute
      input(type="range", value=0.5 min="0", max="1", step="0.1")#volume
      div
        span#current-time 00:00
        sapn  / 
        span#total-time 00:00
      div
        input(type="range", value=0 min="0", step="1")#timeline
      div
        button#full-screen 풀
  div
    p=video.description
    small=video.createdAt
    br
    small 게시자&nbsp;
      a(href=`/users/${video.owner._id}`) #{video.owner.username}
    ul
      p hashtags
      each hashtag in video.hashtags
        li=hashtag
  if video.owner._id.equals(loggedInUser._id)
    a(href=`${video.id}/edit`) Edit Video &rarr;
    br
    a(href=`${video.id}/delete`) delete Video &rarr;

  if loggedIn
    div.video-comments
      form.video-comment-form#comment-form
        textarea(cols="30", rows="10", placeholder="댓글을 입력해주세요")
        button 댓글추가
  div.comment-list
    each comment in video.comments.reverse()
      div.comment-wrap(data-comId=comment.id)
        div.left
          span.comment.text 댓: #{comment.text}
          each user in users
            if comment.owner.equals(user._id)
              span.comment.name 작성자: #{user.username}
        if comment.owner.equals(loggedInUser._id) 
          span.delete-comment ❌
block scripts
  script(src="/static/js/videoPlayer.js")
  if loggedIn
    script(src="/static/js/commentSection.js")